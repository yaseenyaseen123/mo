<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ù…Ø¯ÙŠØ± Ø¬Ø¯ÙŠØ¯ - Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dark-mode.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .admin-badge {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .warning-box {
            background: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            color: #e74c3c;
        }
        
        body.dark-mode .warning-box {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
        }
    </style>
</head>
<body class="login-page">
    <!-- Register Admin Container -->
    <div class="login-container">
        <!-- Left Side - Register Form -->
        <div class="login-form-section">
            <div class="login-header">
                <div class="logo-login">
                    <i class="fas fa-user-shield"></i>
                    <h2>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ</h2>
                </div>
                <div class="admin-badge">
                    <i class="fas fa-crown"></i>
                    ØªØ³Ø¬ÙŠÙ„ Ù…Ø¯ÙŠØ± Ø¬Ø¯ÙŠØ¯
                </div>
                <p class="welcome-text">Ø­Ø³Ø§Ø¨ Ù…Ø¯ÙŠØ± Ø¨ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©</p>
            </div>

            <div class="warning-box">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>ØªÙ†Ø¨ÙŠÙ‡:</strong> Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¯ÙŠØ± Ø¨ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©. ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.
            </div>

            <form class="login-form" id="registerAdminForm">
                <div class="form-group-login">
                    <label for="fullname">
                        <i class="fas fa-user"></i>
                        Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
                    </label>
                    <input 
                        type="text" 
                        id="fullname" 
                        name="fullname" 
                        placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø¯ÙŠØ±"
                        required
                    >
                </div>

                <div class="form-group-login">
                    <label for="email">
                        <i class="fas fa-envelope"></i>
                        Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                    </label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="admin@example.com"
                        required
                    >
                </div>

                <div class="form-group-login">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    </label>
                    <div class="password-input-wrapper">
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                            required
                            minlength="8"
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword()">
                            <i class="fas fa-eye" id="eyeIcon"></i>
                        </button>
                    </div>
                    <small class="password-hint">ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„</small>
                </div>

                <div class="form-group-login">
                    <label for="confirm-password">
                        <i class="fas fa-lock"></i>
                        ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    </label>
                    <input 
                        type="password" 
                        id="confirm-password" 
                        name="confirm-password" 
                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                        required
                    >
                </div>

                <button type="submit" class="btn-login">
                    <i class="fas fa-user-shield"></i>
                    Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¯ÙŠØ±
                </button>

                <div class="register-link">
                    Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ 
                    <a href="login.html">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                </div>
            </form>

            <div class="quick-access">
                <a href="../index.html" class="back-home">
                    <i class="fas fa-home"></i>
                    Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
            </div>
        </div>

        <!-- Right Side - Islamic Design -->
        <div class="login-image-section">
            <div class="overlay-pattern"></div>
            <div class="login-content">
                <div class="islamic-quote">
                    <i class="fas fa-quote-right quote-icon"></i>
                    <p class="quote-text">"ÙˆÙÙ…ÙÙ†Ù’ Ø£ÙØ­Ù’Ø³ÙÙ†Ù Ù‚ÙÙˆÙ’Ù„Ù‹Ø§ Ù…ÙÙ‘Ù…ÙÙ‘Ù† Ø¯ÙØ¹ÙØ§ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù"</p>
                    <span class="quote-source">Ø³ÙˆØ±Ø© ÙØµÙ„Øª</span>
                </div>
                <div class="features-preview">
                    <div class="feature-item">
                        <i class="fas fa-crown"></i>
                        <span>ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-dashboard"></i>
                        <span>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…ØªÙ‚Ø¯Ù…Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-users-cog"></i>
                        <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Ø£Ù…Ø§Ù† Ù…Ø­Ø³Ù‘Ù†</span>
                    </div>
                </div>
            </div>
            <div class="decorative-circles">
                <div class="circle circle-1"></div>
                <div class="circle circle-2"></div>
                <div class="circle circle-3"></div>
            </div>
        </div>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/dark-mode.js"></script>
    <script>
        // Toggle Password Visibility
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        }

        // Handle Admin Registration Form
        document.getElementById('registerAdminForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const fullname = document.getElementById('fullname').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            // Validation
            if (!fullname || fullname.length < 3) {
                showNotification('Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }
            
            if (!email || !email.includes('@')) {
                showNotification('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
                return;
            }
            
            if (!password || password.length < 8) {
                showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†', 'error');
                return;
            }
            
            try {
                showNotification('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ±...', 'info');
                
                // Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙ…Ø¯ÙŠØ±
                const userData = {
                    name: fullname,
                    email: email,
                    password: password,
                    role: 'admin' // ØµÙ„Ø§Ø­ÙŠØ© Ù…Ø¯ÙŠØ±
                };
                
                const newAdmin = await saveUserToDatabase(userData);
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                localStorage.setItem('isLoggedIn', 'true');
                localStorage.setItem('userName', newAdmin.name);
                localStorage.setItem('userEmail', newAdmin.email);
                localStorage.setItem('userRole', 'admin');
                localStorage.setItem('userId', newAdmin.id);
                localStorage.setItem('loginTime', new Date().toISOString());
                
                showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰', 'success');
                
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1500);
            } catch (error) {
                console.error('Register error:', error);
                showNotification(error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹', 'error');
            }
        });

        // Notification Function
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 9999;
                animation: slideDown 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
